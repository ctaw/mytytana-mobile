<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="../css/index.css" />
    <title>Tytana</title>

    <!-- css customized -->
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css" />
    <link href="../css/font-awesome.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../css/modified.css" />
    <link rel="stylesheet" type="text/css" href="../css/student/styles.css" />

    <!-- js customized -->
    <script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.js"></script>
    <script src="../js/scripts.js"></script>
  </head>
  
  <body>
    <!-- content goes here-->
  <div class="wrapper">
    <div class="box">
      <div class="row row-offcanvas row-offcanvas-left">
      <!-- before div 3 -->

        <!-- sidebar -->
        <div class="column col-sm-2 col-xs-1 sidebar-offcanvas" id="sidebar">

          <ul class="nav">
            <li>
               <a href="#" data-toggle="offcanvas" class="visible-xs text-center"><i class="fa fa-list-ul"></i></i></a>
            </li>
          </ul>

          <ul class="nav hidden-xs" id="lg-menu">
            <li class="active"><a href="profile.html"><i class="fa fa-user"></i> Student Profile</a></li>
            <li><a href="#"><i class="fa fa-calendar-o"></i> Class Schedule</a></li>
            <li><a href="#"><i class="fa fa-file-text-o"></i> Current Grades</a></li>
            <li><a href="#"><i class="fa fa-book"></i> Scholastic Record</a></li>
            <li><a href="#"><i class="fa fa-exclamation-triangle"></i></i></i> Deficiency/ Warning</a></li>
            <li><a href="event.html"><i class="fa fa-calendar"></i></i> Academic Calendar</a></li>
            <li><a href="directory.html"><i class="fa fa-phone"></i></i></i> Directory</a></li>
            <br>
            <li><a href="newsfeed.html"><i class="fa fa-home"></i></i></i> Home</a></li>
            <li><a href="#" class="logOut"><i class="fa fa-power-off"></i></i></i> Logout</a></li>
          </ul>

          <!-- tiny only nav-->
          <ul class="nav visible-xs" id="xs-menu">
            <li><a href="profile.html" class="text-center"><i class="fa fa-user"></i></i></a></li>
            <li><a href="#" class="text-center"><i class="fa fa-calendar-o"></i></i></a></li>
            <li><a href="#" class="text-center"><i class="fa fa-file-text-o"></i></i></a></li>
            <li><a href="#" class="text-center"><i class="fa fa-book"></i></i></a></li>
            <li><a href="event.html" class="text-center"><i class="fa fa-exclamation-triangle"></i></i></i></a></li>
            <li><a href="directory.html" class="text-center"><i class="fa fa-phone"></i></i></i></a></li>
            <li><a href="#" class="text-center"><i class="fa fa-calendar"></i></i></a></li>

            <br>
            <li><a href="newsfeed.html" class="text-center"><i class="fa fa-home"></i></i></a></li>
            <li><a href="#" class="text-center logOut"><i class="fa fa-power-off"></i></i></a></li>
            
          </ul>

        </div>
        <!-- /sidebar -->


        <div class="column col-sm-10 col-xs-11" id="main"><!-- main right col -->

          <!-- top nav -->
          <div class="navbar navbar-blue navbar-static-top">  
            <div class="navbar-header-center">
              Student Profile
            </div>
          </div>
          <!-- /top nav -->

          <div class="full col-sm-9" id="news"><!-- full col -->

            <div class="row">
              <div class="col-md-12">
                <center><img src="../img/avatar.png" class="img-circle"></center>
              </div>
            </div>
            <br>
            <div class="row"><!-- row -->
              <div class="panel-group" id="accordion">
                <div class="panel panel-default" id="panel1">
                  <div class="panel-heading">
                     <h4 class="panel-title">
                      <a data-toggle="collapse" data-target="#collapseOne" 
                         href="#collapseOne">
                        Student Information
                      </a>
                      </h4>
                  </div>

                  <div id="collapseOne" class="panel-collapse collapse in">
                    <div class="panel-body">
                      <table class="table table-condensed" id="studentInfo">
                      </table>
                    </div>
                  </div>

                </div>
              </div>
            </div>


            <div class="row"><!-- row -->
              <div class="panel-group" id="accordion">
                <div class="panel panel-default" id="panel1">
                  <div class="panel-heading">
                     <h4 class="panel-title">
                      <a data-toggle="collapse" data-target="#collapseTwo" 
                         href="#collapseTwo">
                        Basic Information
                      </a>
                      </h4>
                  </div>

                  <div id="collapseTwo" class="panel-collapse collapse in">
                    <div class="panel-body">
                      <table class="table table-condensed" id="basicInfo">
                      </table>
                    </div>
                  </div>

                </div>
              </div>
            </div>


            <div class="row"><!-- row -->
              <div class="panel-group" id="accordion">
                <div class="panel panel-default" id="panel1">
                  <div class="panel-heading">
                     <h4 class="panel-title">
                      <a data-toggle="collapse" data-target="#collapseThree" 
                         href="#collapseThree">
                        Guardian Information
                      </a>
                      </h4>
                  </div>

                  <div id="collapseThree" class="panel-collapse collapse in">
                    <div class="panel-body">
                      <table class="table table-condensed" id="guardianInfo">
                      </table>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="row"><!-- row -->
              <div class="panel-group" id="accordion">
                <div class="panel panel-default" id="panel1">
                  <div class="panel-heading">
                     <h4 class="panel-title">
                      <a data-toggle="collapse" data-target="#collapseFour" 
                         href="#collapseFour">
                        Educational Attainment
                      </a>
                      </h4>
                  </div>

                  <div id="collapseFour" class="panel-collapse collapse in">
                    <div class="panel-body">
                      <table class="table table-condensed" id="educationInfo">
                      </table>
                    </div>
                  </div>

                </div>
              </div>
            </div>



          </div><!-- full col -->
        </div><!-- main right col -->

      <!-- before div 3 -->
      </div>
    </div>
  </div>
  <!-- content goes here-->

    <script>
      var studentNumber = localStorage.name
      $.ajax({
        type: 'GET',
        url: 'https://mytytana.herokuapp.com/api/students/'+ studentNumber +'',
        dataType: 'xml',
        success: function(xmlDoc) {
          var $xml = $(xmlDoc);
          $xml.find('student').each(function() {
            var sNumber = $(this).find('student-number').text();
            var fName = $(this).find('first-name').text();
            var mName = $(this).find('middle-name').text();
            var lName = $(this).find('last-name').text();
            var fullname = lName + " " + fName + ", " + mName;
            var course = $(this).find('course-code').text();
            var cYear = $(this).find('curriculum-year').text();
            var eStatus = $(this).find('enrollment-status').text();
            var eGender = $(this).find('gender').text();
            var birthday = $(this).find('birthday').text();
            var birthplace = $(this).find('birthplace').text();
            var civilStatus = $(this).find('civil-status').text();
            var nationality = $(this).find('nationality').text();
            var religion = $(this).find('religion').text();
            var address = $(this).find('address').text();
            var city = $(this).find('city').text();
            var cNumber = $(this).find(' contact-number').text();
            var email = $(this).find('email').text();
            var gName = $(this).find('guardian-name').text();
            var gAddress = $(this).find('guardian-address').text();
            var gNumber = $(this).find('guardian-contact-number').text();
            var gsName = $(this).find('gs-name').text();
            var gsLocation = $(this).find('gs-location').text();
            var gsYear = $(this).find('gs-year').text();
            var hsName = $(this).find('hs-name').text();
            var hsLocation = $(this).find('hs-location').text();
            var hsYear = $(this).find('hs-year').text();

            var monthNames = ["January", "February", "March", "April", "May", "June",
                              "July", "August", "September", "October", "November", "December"];


            var nDate = new Date (birthday)
            var monthDay = nDate.getDate();
            var monthN = nDate.getMonth();
            var year = nDate.getFullYear();
            var monthname = monthNames[nDate.getMonth()];

            var birthDate = monthname + " " + monthDay + ", " + year;

            if(eGender == 0){
              var gender = "Female";
            }else{
              var gender = "Male";
            }

            $("#studentInfo").append('<tr><th>Student Number</th><td>'+ sNumber +'</td></tr>' +
              '<tr><th>Name</th><td>'+ fullname +'</td></tr>' +
              '<tr><th>Course</th><td>' + course + '</td></tr>'+
              '<tr><th>Curriculum Yr</th><td>'+ cYear +'</td></tr>'+
              '<tr><th>Enrollment Status</th><td>'+ eStatus +'</td></tr>');

            $("#basicInfo").append('<tr><td>Gender</td><td>'+ gender +'</td></tr>' + 
              '<tr><th>Birthday</th><td>'+ birthDate +'</td></tr>' +
              '<tr><th>Birthplace</th><td>'+ birthplace +'</td></tr>' +
              '<tr><th>Civil Status</th><td>'+ civilStatus +'</td></tr>' +
              '<tr><th>Nationality</th><td>'+ nationality +'</td></tr>' +
              '<tr><th>Religion</th><td>'+ religion +'</td></tr>' +
              '<tr><th>Address</th><td>'+ address +'</td></tr>' +
              '<tr><th>Town/City</th><td>'+ city +'</td></tr>' +
              '<tr><th>Contact No.</th><td>'+ cNumber +'</td></tr>' +
              '<tr><th>Email</th><td>'+ email +'</td></tr>');

            $("#guardianInfo").append('<tr><th>Guardian/Parents</th><td>'+ gName +'</td></tr>' +
              '<tr><th>Address</th><td>'+ gAddress +'</td></tr>' +
              '<tr><th>Contact No.</th><td>'+ gNumber +'</td></tr>');
            $("#educationInfo").append('<tr><th>Elementary</th><td>'+ gsName +'</td><td>'+ gsLocation +'</td><td>'+ gsYear+'</td></tr>'+ 
              '<tr><th>Highschool</th><td>'+ hsName +'</td><td>'+ hsLocation +'</td><td>'+ hsYear+'</td></tr>'
              );

          });
        }
      });   
    </script>

    <script>
      $('.logOut').click(function(){
        delete localStorage.name;
        window.location.href = "../index.html";
      })
    </script>


    <script type="text/javascript" src="../cordova.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
  </body>

</html>